---
sidebar_position: 2
---

# PhysEdJournal.Api

Здесь описывается структура `Api` проекта

## GraphQL

API сервиса построено через `GraphQL` (библиотека [HotChocolate](https://chillicream.com/docs/hotchocolate/v13))
В `GraphQL` все запросы делятся на 2 типа - квери и мутации. Квери это запросы на получение данных, 
а мутации - на выполнение каких-либо операций

### Query

В файле `Query.cs` объявляются основные сущности, которые поддерживают интерфейс получения данных. 
Атрибутами задаются дополнительные возможности этих сущностей (фильтрация, сортировка, пагинация).

### Mutation

В файле `Mutation.cs` есть только заглушка, все поддерживаемые операции добавляются через [расширения](https://chillicream.com/docs/hotchocolate/v13/defining-a-schema/extending-types)

## Middlewares

Здесь описаны все мидлвари, которые есть в приложении

### LogUserGuidMiddleware

Мидлваря, которая добавляет гуид пользователя, который сделал запрос во все логи.

## PermissionsValidator

Валидатор разрешений преподавателей. Проверяет что у преподавателя, который делает запрос достаточно прав, на совершение этого действия.

## Endpoints

Вспомогательные эндпоинты необходимые для работы журнала.

### StaffEndpoint

Ручка, которая делает запрос к внешнему UserInfo сервису, чтобы получить список преподавателей в вузе. \
Используется для создания выпадающего списка доступных преподавателей на фронте при выдаче им прав.

### MeEndpoint

Ручка, которая возвращает данные об авторизованном студенте или преподавателе.
Данные студента никак не используются на фронте и могут быть убраны в следующих релизах.
Для преподавателя возвращаются его разрешения, с помощью них фронт понимает нужно ли отображать раздел сервиса
физры сотруднику и какие вкладки сервиса ему доступны.

