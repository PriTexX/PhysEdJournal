---
sidebar_position: 1
---

# Структура репозитория

Первое что мы видим в проекте - это структуру самого проекта (как расположены папки, файлы и т.д.) 

## Предыстория

Когда разработка проекта только начиналась структура кода задумывалась как 
[Чистая архитектура](https://habr.com/ru/companies/otus/articles/732178/), отсюда и явно выраженное разделение 
на C# проекты с характерными названиями (Core, Infrastructure). Раньше был и Application слой, но впоследствии рефакторинга
от него избавились.

### Что не так с "чистой" архитектурой?

Чистая архитектура подразумевает под собой разбиение кода на слои по техническим признакам. Тоесть на слои, каждый из которых
отвечает за свою часть приложения (Api слой, слой сохранения данных, слой бизнес-логики и т.д. кол-во слоев может быть разным).
У такого подхода есть несколько минусов применимо к нашей системе

- **Сложность** - У нас довольно простое приложение и оно не содержит какой-то сложной бизнес-логики и управления данными, 
а чистая архитектура применяется в основном в комплексных приложениях
- **Техническое разбиение** - В чистой архитектуре разбиение кода происходит по техническому признаку, это не всегда хорошо
т.к. приложения чаще всего лучше будет разделить на предметные области (DDD, микросервисы) или связанные фичи, которые есть
в приложении
- **Разбросанность кода** - Еще один неочевидный минус технического разбиения это то, что связанный логически код разбросан
физически по всей кодовой базе. Часто мы работаем над какой-либо конкретной фичой (например, проставление посещения) и для
работы над ней нам требуется открыть файл с моделью БД, сервис с бизнес-логикой, апи слой и т.д. и т.п. В случае чистой
архитектуры эти файлы раскиданы по всем слоям равномерно и приходится бегать и искать их. В случае же разбиения по конкретным
фичам весь связанный код лежит в одном месте (может даже в одном файле), что несомненно позитивно влияют на метрику `cohesion`
(не знаю аналог на русском)

После осознания всех этих минусов и того, что нам она ну никак не подходит в проекте, 
было принято решение постепенного избавления от него в сторону упрощения структуры и кода. 
А конкретно мы уже избавились от проекта `Application` и перенесли его части в `Infrastructure`. 
В будущем также избавимся от `Core` и переименуем `Infrastructure` во что-то более внятное.

## Структура проектов

Основу приложения составляют 3 проекта
- [PhysEdJournal.Api](api_project) - Апи проекта
- [PhysEdJournal.Infrastructure](infrastructure_project) - Здесь содержится вся бизнес-логика
- [PhysEdJournal.Core](core_project) - Модели бд, основные типы и ошибки

А также вспомогательный проект
- **PhysEdJournal.Tests** - проект с тестами приложения

## Инфраструктура

Т.к. проект лежит на гитхабе мы активно используем предлагаемые им фичи, такие как GitHub Pages и GitHub Actions.

Здесь можно отметить несколько папок

- **.github/workflows** - yml файлы для GitHub Actions, здесь содержатся все скрипты для CI/CD
- **deploy** - Здесь лежат все конфиги необходимые для работы приложения в проде
- **docs** - Проект с документацией

## Дополнительно

Еще можно заметить в репозитории файл `CodeStyle.ruleset` - это набор правил, которые задают ряд ограничений
на то какой код можно писать, а какой нельзя (например название классов всегда должно быть с большой буквы).
Подробнее про это можно почитать [тут](https://github.com/DotNetAnalyzers/StyleCopAnalyzers)